process {
  executor = 'slurm'
  queue='super'

  // Process specific configuration
  $checkDesignFile {
    module = ['python/3.6.1-2-anaconda']
    executor = 'local'
  }
  $trimReads {
    module = ['python/3.6.1-2-anaconda', 'trimgalore/0.4.1']
    cpus = 32
  }
  $alignReads{
    module = ['python/3.6.1-2-anaconda', 'bwa/intel/0.7.12', 'samtools/intel/1.3']
    cpus = 32
  }
  $filterReads{
    module = ['python/3.6.1-2-anaconda', 'samtools/1.4.1', 'sambamba/0.6.6', 'bedtools/2.26.0']
    cpus = 32
  }
  $experimentQC {
    module = ['python/3.6.1-2-anaconda', 'deeptools/2.5.0.1']
    executor = 'local'
  }
  $convertReads {
    module = ['python/3.6.1-2-anaconda',  'samtools/1.4.1', 'bedtools/2.26.0']
    cpus = 32
  }
}

params {
  // Reference file paths on BioHPC
  genomes {
    'GRCh38' { bwa = '/project/shared/bicf_workflow_ref/GRCh38' }
    'GRCh37' { bwa = '/project/shared/bicf_workflow_ref/GRCh37' }
    'GRCm38' { bwa = '/project/shared/bicf_workflow_ref/GRCm38' }
  }
}

trace {
    enabled = true
    file = 'pipeline_trace.txt'
    fields = 'task_id,native_id,process,name,status,exit,submit,start,complete,duration,realtime,%cpu,%mem,rss'
}
